<!DOCTYPE html>
<html>
    <head>
        <title>Rock Paper Scissors</title>
        <meta charset="UTF-8"/>

    </head>
    <body>
        <script>
            let points = 0;
           
            
            function computerPlay(){
                let selector = Math.random();
                console.log(selector);
                if(selector <= .33 ){
                    return "rock";
                }else if(selector <= .66){
                    return "paper";
                    
                }else if(selector <= 1){
                    return "scissors"
                }
                                
            }


            function playRound(playerSelection, computerSelection){

                playerSelection=playerSelection.toLowerCase();
               
                

                if(playerSelection=="rock"){
                    if (computerSelection=="rock"){
                        return "Tie!";
                    }
                    if (computerSelection=="scissors"){
                        points++;
                        return "You Win! Rock beats Scissors";
                        
                    }
                    if (computerSelection=="paper"){
                        return "You lose! Paper beats Rock"
                    }
                }
                if(playerSelection=="paper"){
                    if (computerSelection=="rock"){
                        points++;
                        return "You Win! Paper beats Rock";
                        
                    }
                    if (computerSelection=="scissors"){
                        return "You lose! Scissors beats paper";
                    }
                    if (computerSelection=="paper"){
                        return "Tie!"
                    }
                }
                if(playerSelection=="scissors"){
                    if (computerSelection=="rock"){
                        return "You lose! Rock beats Scissors";
                    }
                    if (computerSelection=="scissors"){
                        return "Tie!";
                    }
                    if (computerSelection=="paper"){
                        points++;
                        return "You Win! Scissors beat paper"
                        
                    }
                }

            }
            let flag = false;
            

            function checkPlayerInput(input){
                console.log(input);
                input = input.toLowerCase();
                if (input=="rock"||input=="paper"||input=="scissors"){
                    flag = true;
                
                }else flag= false;
            }


            function game(){
                alert("Welcome to Rock, Paper, Scissors!\nBest of 5 wins!\nGood Luck!")
              let round = 0;  
            
            for(i = 0; i<5;i++){
                let playerInput = window.prompt(`Round: ${i+1}/5  Score: ${points}/5\nPick: Rock, paper or scissors.`)
                checkPlayerInput(playerInput);
                while (!flag){
                    alert("Not an option!");
                    playerInput = window.prompt(`Round: ${i+1}/5  Score: ${points}/5\nPick: Rock, paper or scissors.`)
                    checkPlayerInput(playerInput);
                }

                let result = playRound(playerInput,computerPlay())
                    alert(result +  `\nScore: ${points}/5` );



            }

            if(points>=3){
                alert(`You won the game!\nScore: ${points}/5\nReload the page to play again.`);
            }else alert(`You lost the game!\nScore: ${points}/5\nReload the page to play again.`);
            
            }
            game();
        </script>

    </body>
</html>